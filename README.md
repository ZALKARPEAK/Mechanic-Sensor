# Sensor API - REST API для работы с данными сенсоров

Добро пожаловать в проект **Sensor API**! Это приложение позволяет регистрировать сенсоры, собирать данные измерений и выполнять аналитику на основе этих данных. В данном руководстве подробно описано, как развернуть приложение, используя Docker и Docker Compose, а также примеры работы с API.

---

### Краткий обзор возможностей

- Регистрация сенсоров через защищенные эндпоинты.
- Добавление данных измерений температуры и состояния погоды.
- Подсчет дождливых дней и возврат всех измерений.
- Полная защита API с использованием JWT авторизации.

---

### Развертывание проекта

**1. Подготовка окружения**

Убедитесь, что на вашем устройстве установлены:
- Docker
- Docker Compose

**2. Сборка образа приложения**

Клонируйте репозиторий проекта и выполните команду для сборки Docker-образа:
```bash
docker build -t sensor-api .
```

**3. Запуск сервисов**

Используя Docker Compose, запустите все необходимые сервисы:
```bash
docker-compose up
```
После запуска приложение будет доступно по адресу: `http://localhost:8080`.

---

### Использование API

Пример взаимодействия с API приведен ниже. Для авторизации используйте токен JWT, полученный после регистрации сенсора.

**Регистрация сенсора**
```bash
POST /sensors/registration
Content-Type: application/json

{
  "name": "sensorName"
}
```

**Добавление измерения**
```bash
POST /measurements/add
Content-Type: application/json

{
  "value": 23.5,
  "raining": true,
  "sensor": {
    "name": "sensorName"
  }
}
```

**Получение всех измерений**
```bash
GET /measurements
```

**Подсчет дождливых дней**
```bash
GET /measurements/rainyDaysCount
```

---

### Docker и конфигурация

**Dockerfile**

Файл `Dockerfile` описывает процесс сборки образа приложения на основе официального образа OpenJDK.

**Docker Compose**

Файл `docker-compose.yml` позволяет автоматически развернуть приложение и базу данных PostgreSQL с предустановленными параметрами.

**Обновление конфигурации**

Если необходимо изменить настройки базы данных или JWT, отредактируйте секцию `environment` в `docker-compose.yml`.

---

### Тестирование и проверка

Для проверки работы API предусмотрен набор тестов, написанных с использованием JUnit и Mockito. Чтобы запустить тесты локально, выполните:
```bash
./mvnw test
```

---

### Заключение

Проект Sensor API создан для удобного управления данными сенсоров. Мы надеемся, что это решение будет полезным и понятным для вашей команды. Если у вас возникнут вопросы или предложения, не стесняйтесь оставлять обратную связь.
